"use strict";let sidebarOpen,sidebar,titlebar,content_div,applyAttributes=(t,e)=>{t&&Object.keys(t).forEach(i=>{e.setAttribute(i,t[i])})};export class Item{parentElement;cardAttrs;title;header;headerAttrs;content;contentAttrs;imagePath;imageCaptionText;imageAttrs;alt;list;constructor(t){this.parentElement=t.parentElement,this.title=t.title,this.content=t.content,this.contentAttrs=t.contentAttrs,this.imagePath=t.imagePath,this.imageCaptionText=t.imageCaptionText,this.list=t.list,this.imageAttrs=t.imageAttrs,this.cardAttrs=t.cardAttrs,this.titleAttrs=t.titleAttrs,this.header=t.header,this.headerAttrs=t.headerAttrs,this.alt=t.altText}createCardItem(t=null){let e=document.createElement("div");return applyAttributes(t,e),e.classList.add("card-div"),e}createImageWithCaption(t,e,i,s=null){let a=document.createElement("img");a.alt=i,a.src=e,a.role="button",a.ariaLabel="Click to fullscreen image",a.title="Click to fullscreen image",a.width=200,a.height=200,a.tabIndex=0;let n=document.createElement("h3");n.innerHTML=t;let r=document.createElement("div");applyAttributes(s,r),r.appendChild(a),r.appendChild(n),r.classList.add("image-with-caption");let l=()=>{a.requestFullscreen(),a.style.width=document.body.offsetWidth,a.style.height=document.body.offsetHeight,a.style.width="",a.style.height="",closeSidebar()};return a.addEventListener("click",()=>{document.fullscreenElement?document.exitFullscreen():l()}),a.addEventListener("keyup",t=>{("Enter"===t.code||"Space"===t.code)&&l()}),document.addEventListener("keyup",t=>{("Enter"===t.code||"Space"===t.code)&&document.fullscreenElement&&document.exitFullscreen()}),r}createContent(t=null){let e=document.createElement("p");return e.classList.add("content"),applyAttributes(t,e),e}createContentTitle(t=null){let e=document.createElement("h2");return applyAttributes(t,e),e.classList.add("default-padding"),e}createListContent(t,e=null){let i=t.map(t=>`<li>${t}</li>`),s="<ul>";if(i.forEach(t=>s+=t),s+="</ul>",e)e.innerHTML+=s;else{let a=this.createContent();return a.innerHTML=s,a}}createHeader(t=null){let e=document.createElement("h1");return applyAttributes(t,e),e}render(){if(this.item=this.createCardItem(this.cardAttrs),this.header){let t=this.createHeader(this.headerAttrs);t.innerHTML=this.header,this.item.appendChild(t)}if(this.title){let e=this.createContentTitle(this.titleAttrs);e.innerHTML=this.title,this.item.appendChild(e)}if(this.content){let i=this.createContent(this.contentAttrs);if(i.innerHTML=this.content,this.item.appendChild(i),this.imagePath&&this.imageCaptionText){let s=this.createImageWithCaption(this.imageCaptionText,this.imagePath,this.alt,this.imageAttrs);s.classList.add("content-image"),i.insertAdjacentElement("afterbegin",s)}}if(this.list){let a=this.createListContent(this.list,this.content);this.item.appendChild(a)}return this.parentElement.appendChild(this.item),this.item}toggleHide(){this.item.classList.toggle("hide-item")}}export class ItemBuilder{parentElement;cardAttrs;title;header;headerAttrs;content;contentAttrs;list;imagePath;imageCaptionText;imageAttrs;titleAttrs;altText;constructor(t){this.parentElement=t,this.cardAttrs=null,this.title=null,this.content=null,this.imagePath=null,this.imageCaptionText=null,this.imageAttrs=null,this.titleAttrs=null,this.altText=null,this.list=null,this.header=null,this.headerAttrs=null,this.contentAttrs=null}addCardAttrs(t){if({attrs:this.cardAttrs}=t,void 0===this.cardAttrs)throw ReferenceError("Did not define necessary 'attrs' key with Object")}addTitle(t){if({title:this.title,attrs:this.titleAttrs=null}=t,void 0===this.title)throw ReferenceError("Did not define necessary 'title' key with String");return this}addContent(t){if({content:this.content,attrs:this.contentAttrs}=t,void 0===this.content)throw ReferenceError("Did not define necessary 'content' key with String");return this}addImage(t){if({imagePath:this.imagePath,imageCaptionText:this.imageCaptionText,altText:this.altText,attrs:this.imageAttrs=null}=t,void 0===this.imagePath)throw ReferenceError("Did not define necessary 'imagePath' key with String");if(void 0===this.imageCaptionText)throw ReferenceError("Did not define necessary 'imageCaptionText' key with String");return this}addList(t){if({list:this.list}=t,void 0===this.list)throw ReferenceError("Did not define necessary 'list' key with Array");return this}addHeader(t){if({header:this.header,attrs:this.headerAttrs}=t,void 0===this.header)throw ReferenceError("Did not define necessary 'header' key with String");return this}build(){return new Item(this)}buildFromObject(t){return Object.keys(t).forEach(e=>this[e](t[e])),new Item(this)}}export class ItemArray extends Array{constructor(){super(1)}buildPageFromJson(t,e){return t.forEach(t=>this.push(new ItemBuilder(e).buildFromObject(t))),this}render(){this.forEach(t=>{t.render()})}}export function loadPage(t,e){fetch("/navigation/navigation.txt").then(t=>t.text()).then(e=>{document.body.innerHTML=e,sidebar=document.getElementById("sidebar"),titlebar=document.getElementById("top-div"),content_div=document.getElementById("content"),sidebarOpen=!1,window.matchMedia("not (orientation:portrait)").matches&&openSidebar(),content_div.addEventListener("click",()=>{window.matchMedia("(orientation:portrait)").matches&&closeSidebar()}),content_div.addEventListener("keyup",t=>{window.matchMedia("(orientation:portrait)").matches&&("Space"===t.code||"Enter"===t.code)&&closeSidebar()}),document.querySelector("#menu-button").onclick=function t(){sidebar.classList.remove("static-sidebar-closed"),titlebar.classList.remove("static-content-closed"),sidebar.classList.remove("static-sidebar"),titlebar.classList.remove("static-content"),sidebarOpen?closeSidebar():sidebarOpen||openSidebar()},window.addEventListener("resize",function(){window.matchMedia("(orientation:portrait)").matches||window.matchMedia("only screen and (orientation:landscape) and (max-width:992px)").matches||(sidebar.classList.remove("close-sidebar"),titlebar.classList.remove("grow-content"),sidebar.classList.remove("open-sidebar"),titlebar.classList.remove("shrink-content"),sidebarOpen?sidebarOpen&&(sidebar.classList.add("static-sidebar"),titlebar.classList.add("static-content")):(sidebar.classList.add("static-sidebar-closed"),titlebar.classList.add("static-content-closed")))}),t(content_div)}).catch(()=>{e()})}export function openSidebar(){sidebarOpen=!0;let t=document.querySelector("#menu-button");t.classList.add("close-sidebar-button"),t.ariaLabel="Sidebar button, select to close",t.title="Open Sidebar",titlebar.classList.remove("grow-content"),titlebar.classList.add("shrink-content"),sidebar.classList.remove("close-sidebar"),sidebar.classList.add("open-sidebar"),content_div.classList.remove("grow-content"),content_div.classList.add("shrink-content"),(window.matchMedia("only screen and (orientation:landscape) and (max-width:992px)").matches||window.matchMedia("(orientation:portrait)").matches)&&(document.body.style.overflow="hidden")}export function closeSidebar(){sidebarOpen=!1;let t=document.querySelector("#menu-button");t.classList.remove("close-sidebar-button"),t.ariaLabel="Sidebar button, select to open",t.title="Open Sidebar",titlebar.classList.remove("shrink-content"),titlebar.classList.add("grow-content"),sidebar.classList.remove("open-sidebar"),sidebar.classList.add("close-sidebar"),content_div.classList.remove("shrink-content"),content_div.classList.add("grow-content"),document.body.style.overflow="visible"}