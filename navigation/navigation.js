"use strict";let sidebarOpen,sidebar,titlebar,content_div,applyAttributes=(t,e)=>{t&&Object.keys(t).forEach((i=>{e.setAttribute(i,t[i])}))};export class Item{parentElement;cardAttrs;title;header;headerAttrs;content;contentAttrs;imagePath;imageCaptionText;imageAttrs;alt;list;date;constructor(t){this.parentElement=t.parentElement,this.title=t.title,this.content=t.content,this.contentAttrs=t.contentAttrs,this.imagePath=t.imagePath,this.imageCaptionText=t.imageCaptionText,this.list=t.list,this.imageAttrs=t.imageAttrs,this.cardAttrs=t.cardAttrs,this.titleAttrs=t.titleAttrs,this.header=t.header,this.headerAttrs=t.headerAttrs,this.alt=t.altText,this.date=t.date}createCardItem(t=null){const e=document.createElement("div");return applyAttributes(t,e),e.classList.add("card-div"),e}createImageWithCaption(t,e,i,n=null){const s=document.createElement("img");s.alt=i,s.src=e,s.role="button",s.ariaLabel="Click to fullscreen image",s.title="Click to fullscreen image",s.width=200,s.height=200,s.tabIndex=0;const a=document.createElement("h3");a.innerHTML=t;const r=document.createElement("div");applyAttributes(n,r),r.appendChild(s),r.appendChild(a),r.classList.add("image-with-caption");let d=()=>{s.requestFullscreen(),s.style.width=document.body.offsetWidth,s.style.height=document.body.offsetHeight,s.style.width="",s.style.height="",closeSidebar()};return s.addEventListener("click",(()=>{document.fullscreenElement?document.exitFullscreen():d()})),s.addEventListener("keyup",(t=>{"Enter"!==t.code&&"Space"!==t.code||d()})),document.addEventListener("keyup",(t=>{"Enter"!==t.code&&"Space"!==t.code||!document.fullscreenElement||document.exitFullscreen()})),r}createContent(t=null){const e=document.createElement("p");return e.classList.add("content"),applyAttributes(t,e),e}createContentTitle(t=null){const e=document.createElement("h2");return applyAttributes(t,e),e.classList.add("default-padding"),e}createListContent(t,e=null){const i=t.map((t=>`<li>${t}</li>`));let n="<ul>";if(i.forEach((t=>n+=t)),n+="</ul>",!e){const t=this.createContent();return t.innerHTML=n,t}e.innerHTML+=n}createHeader(t=null){const e=document.createElement("h1");return applyAttributes(t,e),e}createDateSpan(){const t=document.createElement("span");return t.classList.add("date-span"),t}render(){if(this.item=this.createCardItem(this.cardAttrs),this.header){const t=this.createHeader(this.headerAttrs);t.innerHTML=this.header,this.item.appendChild(t)}if(this.title){const t=this.createContentTitle(this.titleAttrs);t.innerHTML=this.title,this.item.appendChild(t)}if(this.content){const t=this.createContent(this.contentAttrs);if(t.innerHTML=this.content,this.date){const e=this.createDateSpan();e.innerHTML=`<br>${this.date}`,t.appendChild(e)}if(this.item.appendChild(t),this.imagePath&&this.imageCaptionText){const e=this.createImageWithCaption(this.imageCaptionText,this.imagePath,this.alt,this.imageAttrs);e.classList.add("content-image"),t.insertAdjacentElement("afterbegin",e)}}if(this.list){const t=this.createListContent(this.list,this.content);this.item.appendChild(t)}return this.parentElement.appendChild(this.item),this.item}toggleHide(){this.item.classList.toggle("hide-item")}}export class ItemBuilder{parentElement;cardAttrs;title;header;headerAttrs;content;contentAttrs;list;imagePath;imageCaptionText;imageAttrs;titleAttrs;altText;date;constructor(t){this.parentElement=t,this.cardAttrs=null,this.title=null,this.content=null,this.imagePath=null,this.imageCaptionText=null,this.imageAttrs=null,this.titleAttrs=null,this.altText=null,this.list=null,this.header=null,this.headerAttrs=null,this.contentAttrs=null,this.date=null}addCardAttrs(t){if(({attrs:this.cardAttrs}=t),void 0===this.cardAttrs)throw new ReferenceError("Did not define necessary 'attrs' key with Object")}addTitle(t){if(({title:this.title,attrs:this.titleAttrs=null}=t),void 0===this.title)throw new ReferenceError("Did not define necessary 'title' key with String");return this}addContent(t){if(({content:this.content,attrs:this.contentAttrs,date:this.date}=t),void 0===this.content)throw new ReferenceError("Did not define necessary 'content' key with String");return this}addImage(t){if(({imagePath:this.imagePath,imageCaptionText:this.imageCaptionText,altText:this.altText,attrs:this.imageAttrs=null}=t),void 0===this.imagePath)throw new ReferenceError("Did not define necessary 'imagePath' key with String");if(void 0===this.imageCaptionText)throw new ReferenceError("Did not define necessary 'imageCaptionText' key with String");return this}addList(t){if(({list:this.list}=t),void 0===this.list)throw new ReferenceError("Did not define necessary 'list' key with Array");return this}addHeader(t){if(({header:this.header,attrs:this.headerAttrs}=t),void 0===this.header)throw new ReferenceError("Did not define necessary 'header' key with String");return this}build(){return new Item(this)}buildFromObject(t){return Object.keys(t).forEach((e=>this[e](t[e]))),new Item(this)}}export class ItemArray extends Array{constructor(){super(1)}buildPageFromJson(t,e){return t.forEach((t=>this.push(new ItemBuilder(e).buildFromObject(t)))),this}render(){this.forEach((t=>{t.render()}))}}export function loadPage(t,e){fetch("/navigation/navigation.txt").then((t=>t.text())).then((e=>{document.body.innerHTML=e,sidebar=document.getElementById("sidebar"),titlebar=document.getElementById("top-div"),content_div=document.getElementById("content"),sidebarOpen=!1,window.matchMedia("not (orientation:portrait)").matches&&openSidebar(),content_div.addEventListener("click",(()=>{window.matchMedia("(orientation:portrait)").matches&&sidebarOpen&&closeSidebar()})),content_div.addEventListener("keyup",(t=>{window.matchMedia("(orientation:portrait)").matches&&("Space"===t.code||"Enter"===t.code)&&sidebarOpen&&closeSidebar()})),document.querySelector("#menu-button").onclick=function(){sidebar.classList.remove("static-sidebar-closed"),titlebar.classList.remove("static-content-closed"),sidebar.classList.remove("static-sidebar"),titlebar.classList.remove("static-content"),sidebarOpen?closeSidebar():sidebarOpen||openSidebar()},window.addEventListener("resize",(function(){window.matchMedia("(orientation:portrait)").matches||window.matchMedia("only screen and (orientation:landscape) and (max-width:992px)").matches||(sidebar.classList.remove("close-sidebar"),titlebar.classList.remove("grow-content"),sidebar.classList.remove("open-sidebar"),titlebar.classList.remove("shrink-content"),sidebarOpen?sidebarOpen&&(sidebar.classList.add("static-sidebar"),titlebar.classList.add("static-content")):(sidebar.classList.add("static-sidebar-closed"),titlebar.classList.add("static-content-closed")))})),t(content_div)})).catch((()=>{e()}))}export function openSidebar(){sidebarOpen=!0;const t=document.querySelector("#menu-button");t.classList.add("close-sidebar-button"),t.ariaLabel="Sidebar button, select to close",t.title="Open Sidebar",titlebar.classList.remove("grow-content"),titlebar.classList.add("shrink-content"),sidebar.classList.remove("close-sidebar"),sidebar.classList.add("open-sidebar"),content_div.classList.remove("grow-content"),content_div.classList.add("shrink-content"),(window.matchMedia("only screen and (orientation:landscape) and (max-width:992px)").matches||window.matchMedia("(orientation:portrait)").matches)&&(document.body.style.overflow="hidden")}export function closeSidebar(){sidebarOpen=!1;const t=document.querySelector("#menu-button");t.classList.remove("close-sidebar-button"),t.ariaLabel="Sidebar button, select to open",t.title="Open Sidebar",titlebar.classList.remove("shrink-content"),titlebar.classList.add("grow-content"),sidebar.classList.remove("open-sidebar"),sidebar.classList.add("close-sidebar"),content_div.classList.remove("shrink-content"),content_div.classList.add("grow-content"),document.body.style.overflow="visible"}